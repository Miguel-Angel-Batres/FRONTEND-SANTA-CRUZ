<section class="deportes-section">
  <div class="deportes-header">
    <h1>Deportes</h1>
    <div class="divider"></div>
    <h4>Descubre el poder del deporte con el respaldo de un equipo profesional y capacitado. Mejora tu salud, supera tus límites y disfruta cada paso del camino. ¡Inscríbete y vive la diferencia!</h4>
  </div>
  
  <app-search-bar (searchChange)="onSearch($event)"></app-search-bar>

 <div class="deportes-container">
  @if (filteredDeportes.length === 0) {
    <div class="loading-message">
      <mat-progress-spinner
        color="primary"
        mode="indeterminate"
        diameter="60">
      </mat-progress-spinner>
    </div>
  }
  @if (filteredDeportes.length > 0) {
@for (deporte of filteredDeportes; track deporte) {
  <div class="deporte-card">
    <div class="card-image-container" style="position: relative;">
      @if (imagenCargando[deporte.nombre]) {
        <div class="image-spinner" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
          <mat-progress-spinner color="primary" mode="indeterminate" diameter="40"></mat-progress-spinner>
        </div>
          }
          <img
            [src]="deporte.img"
            alt="{{deporte.nombre}}"
            class="card-image"
            (load)="imagenCargando[deporte.nombre] = false"
            (error)="imagenCargando[deporte.nombre] = true"
            [style.visibility]="imagenCargando[deporte.nombre] ? 'hidden' : 'visible'"
          >
        </div>
        <div class="card-content">
          <h3 class="card-title">{{deporte.nombre}}</h3>
          <p class="card-description">{{deporte.bio}}</p>
          <a [routerLink]="['/deporte', deporte.nombre]" class="card-button">Ver Más</a>
        </div>
      </div>
    }
  }
</div>
</section>
